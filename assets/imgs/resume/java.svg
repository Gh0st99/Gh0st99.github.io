<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1420px" preserveAspectRatio="none" style="width:1585px;height:1420px;background:#FFFFFF;" version="1.1" viewBox="0 0 1585 1420" width="1585px" zoomAndPan="magnify"><defs><filter height="300%" id="f1tsjxy2bf8drc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="46" x="537" y="691.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="547" y="714.0889">Java</text><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="96" x="633" y="570.7578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="643" y="593.7529">并发 &amp; 同步</text><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="182" x="779" y="20"/><a href="https://tech.meituan.com/2018/11/15/java-lock.html" target="_top" title="https://tech.meituan.com/2018/11/15/java-lock.html" xlink:actuate="onRequest" xlink:href="https://tech.meituan.com/2018/11/15/java-lock.html" xlink:show="new" xlink:title="https://tech.meituan.com/2018/11/15/java-lock.html" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="61" x="789" y="42.9951">锁事-美团</text></a><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="854" y="42.9951">synchronized</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="1014" y="33.8467">原理，可重入性，可见性</text><path d="M961,38.1484 L971,38.1484 C986,38.1484 986,29 1001,29 L1011,29 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="1014" y="52.1436">锁升级</text><path d="M961,38.1484 L971,38.1484 C986,38.1484 986,47.2969 1001,47.2969 L1011,47.2969 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M729,588.9063 L739,588.9063 C754,588.9063 754,38.1484 769,38.1484 L779,38.1484 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="67" x="779" y="76.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="789" y="99.292">volatile</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="899" y="90.1436">可见性</text><path d="M846,94.4453 L856,94.4453 C871,94.4453 871,85.2969 886,85.2969 L896,85.2969 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="899" y="108.4404">内存屏障</text><path d="M846,94.4453 L856,94.4453 C871,94.4453 871,103.5938 886,103.5938 L896,103.5938 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M729,588.9063 L739,588.9063 C754,588.9063 754,94.4453 769,94.4453 L779,94.4453 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="34" x="779" y="498.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="14" x="789" y="521.9717">锁</text><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="62" x="863" y="314.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="873" y="337.1514">锁升级</text><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="62" x="975" y="197.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="985" y="220.0732">偏向锁</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="1090" y="136.5889">一直被一个线程所访问</text><path d="M1037,215.2266 L1047,215.2266 C1062,215.2266 1062,131.7422 1077,131.7422 L1087,131.7422 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="14" x="1090" y="154.8857">在</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="85" x="1108" y="154.8857">Mark Word</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="1197" y="154.8857">里存储锁偏向的线程</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="15" x="1327" y="154.8857">ID</text><path d="M1037,215.2266 L1047,215.2266 C1062,215.2266 1062,150.0391 1077,150.0391 L1087,150.0391 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="1094" y="173.1826"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1090" y="189.4795">撤销</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="14" x="1118" y="189.4795">：</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="238" x="1090" y="205.7764">只有遇到其他线程尝试竞争偏向锁时，</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="1090" y="222.0732">持有偏向锁的线程才会释放锁，</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="70" x="1090" y="238.3701">不会主动释</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="1160" y="238.3701">放偏向锁。</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="98" x="1090" y="254.667">等待全局安全点</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="1188" y="254.667">，暂停拥有偏向锁的线程，</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="210" x="1090" y="270.9639">判断锁对象是否处于被锁定状态。</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="380" x="1090" y="287.2607">恢复无锁（标志位为 01）或轻量级锁（标志位为 00）的状态</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="1094" y="303.5576"/><path d="M1037,215.2266 L1047,215.2266 C1062,215.2266 1062,233.5234 1077,233.5234 L1087,233.5234 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M925,332.3047 L935,332.3047 C950,332.3047 950,215.2266 965,215.2266 L975,215.2266 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="76" x="975" y="397.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="985" y="420.6357">轻量级锁</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="392" x="1104" y="321.8545">线程会通过自旋的形式尝试获取锁，不会阻塞，从而提高性能。</text><path d="M1051,415.7891 L1061,415.7891 C1076,415.7891 1076,317.0078 1091,317.0078 L1101,317.0078 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="1108" y="340.1514"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1104" y="356.4482">无锁状态:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="14" x="1104" y="372.7451">在</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="98" x="1118" y="372.7451">当前线程的栈帧</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="1216" y="372.7451">中建立一个名为</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="42" x="1314" y="372.7451">锁记录</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="1356" y="372.7451">（Lock Record）的空间，</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="1104" y="389.042">用于存储锁对象目前的</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="85" x="1248" y="389.042">Mark Word</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1337" y="389.042">的拷贝，</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="1104" y="405.3389">然后拷贝对象头中的</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="85" x="1234" y="405.3389">Mark Word</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="1323" y="405.3389">复制到锁记录中。</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="1104" y="421.6357">CAS 操作尝试将对象的</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="85" x="1252" y="421.6357">Mark Word</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="1341" y="421.6357"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1341" y="421.6357">更新</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="1369" y="421.6357">为指向</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="98" x="1415" y="421.6357">Lock Record</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1517" y="421.6357">的指针，</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="1104" y="437.9326">并将</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="98" x="1136" y="437.9326">Lock Record</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="1238" y="437.9326">里的</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="51" x="1270" y="437.9326">owner</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="1325" y="437.9326">指针指向对象的</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="85" x="1427" y="437.9326">Mark Word</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="14" x="1512" y="437.9326">。</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="1104" y="454.2295">更新</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1132" y="454.2295">成功</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="330" x="1160" y="454.2295">： 线程就拥有了该对象的锁，锁标志位设置为“00”。</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="1104" y="470.5264">更新</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1132" y="470.5264">失败</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169" x="1160" y="470.5264">： 对象的 Mark Word 是否</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="126" x="1329" y="470.5264">指向当前线程的栈帧</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="14" x="1455" y="470.5264">？</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="1104" y="486.8232">只有当前一个等待线程，自旋；</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="224" x="1104" y="503.1201">自旋超过次数，或来第三个，膨胀。</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="1108" y="519.417"/><path d="M1051,415.7891 L1061,415.7891 C1076,415.7891 1076,424.9375 1091,424.9375 L1101,424.9375 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M925,332.3047 L935,332.3047 C950,332.3047 950,415.7891 965,415.7891 L975,415.7891 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="978" y="537.7139">重量级锁：管程</text><path d="M925,332.3047 L935,332.3047 C950,332.3047 950,532.8672 965,532.8672 L975,532.8672 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M813,517.125 L823,517.125 C838,517.125 838,332.3047 853,332.3047 L863,332.3047 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="870" y="556.0107"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="28" x="866" y="572.3076">乐观</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="429" x="894" y="572.3076">: 只是在更新数据的时候去判断之前有没有别的线程更新了这个数据，</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="322" x="866" y="588.6045">没有被更新，当前线程将自己修改的数据成功写入。</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="476" x="866" y="604.9014">已经被其他线程更新，则根据不同的实现方式执行不同的操作（报错或重试）</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="870" y="621.1982"/><path d="M813,517.125 L823,517.125 C838,517.125 838,583.7578 853,583.7578 L863,583.7578 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="870" y="639.4951"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="28" x="866" y="655.792">悲观</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="279" x="894" y="655.792">: 使用数据的时候一定有别的线程来修改数据,</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="172" x="866" y="672.0889">在获取数据的时候会先加锁,</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="866" y="688.3857">确保数据不会被别的线程修改。</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="870" y="704.6826"/><path d="M813,517.125 L823,517.125 C838,517.125 838,667.2422 853,667.2422 L863,667.2422 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="52" x="863" y="727.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32" x="873" y="750.4248">CAS</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="968" y="722.9795">乐观锁中的重试</text><path d="M915,745.5781 L925,745.5781 C940,745.5781 940,718.1328 955,718.1328 L965,718.1328 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="60" x="968" y="741.2764">ABA问题</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190" x="1028" y="741.2764">: AtomicStampedReference</text><path d="M915,745.5781 L925,745.5781 C940,745.5781 940,736.4297 955,736.4297 L965,736.4297 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="210" x="968" y="759.5732">只能保证一个共享变量的原子操作</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="1178" y="759.5732">: AtomicReference</text><path d="M915,745.5781 L925,745.5781 C940,745.5781 940,754.7266 955,754.7266 L965,754.7266 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="112" x="968" y="777.8701">循环时间长开销大</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="1080" y="777.8701">: 只能保证一个共享变量的原子操作</text><path d="M915,745.5781 L925,745.5781 C940,745.5781 940,773.0234 955,773.0234 L965,773.0234 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M813,517.125 L823,517.125 C838,517.125 838,745.5781 853,745.5781 L863,745.5781 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="48" x="863" y="783.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="873" y="806.7217">死锁</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="964" y="797.5732">产生条件</text><path d="M911,801.875 L921,801.875 C936,801.875 936,792.7266 951,792.7266 L961,792.7266 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="964" y="815.8701">排查</text><path d="M911,801.875 L921,801.875 C936,801.875 936,811.0234 951,811.0234 L961,811.0234 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M813,517.125 L823,517.125 C838,517.125 838,801.875 853,801.875 L863,801.875 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="112" x="863" y="847.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="873" y="870.7607">reentrantlock</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="224" x="1028" y="834.167">实现原理，加锁和释放锁的一个过程</text><path d="M975,865.9141 L985,865.9141 C1000,865.9141 1000,829.3203 1015,829.3203 L1025,829.3203 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="1028" y="852.4639">aqs</text><path d="M975,865.9141 L985,865.9141 C1000,865.9141 1000,847.6172 1015,847.6172 L1025,847.6172 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="1028" y="870.7607">公平和非公平</text><path d="M975,865.9141 L985,865.9141 C1000,865.9141 1000,865.9141 1015,865.9141 L1025,865.9141 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="1028" y="889.0576">可重入</text><path d="M975,865.9141 L985,865.9141 C1000,865.9141 1000,884.2109 1015,884.2109 L1025,884.2109 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="1028" y="907.3545">可中断</text><path d="M975,865.9141 L985,865.9141 C1000,865.9141 1000,902.5078 1015,902.5078 L1025,902.5078 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M813,517.125 L823,517.125 C838,517.125 838,865.9141 853,865.9141 L863,865.9141 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M729,588.9063 L739,588.9063 C754,588.9063 754,517.125 769,517.125 L779,517.125 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="90" x="779" y="1021.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="789" y="1044.5811">并发工具类</text><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="160" x="919" y="930.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="929" y="953.0967">concurrenthashmap</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="1132" y="925.6514">怎么保证线程安全的</text><path d="M1079,948.25 L1089,948.25 C1104,948.25 1104,920.8047 1119,920.8047 L1129,920.8047 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="1132" y="943.9482">为什么用synchronized</text><path d="M1079,948.25 L1089,948.25 C1104,948.25 1104,939.1016 1119,939.1016 L1129,939.1016 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="1132" y="962.2451">分段锁有什么问题</text><path d="M1079,948.25 L1089,948.25 C1104,948.25 1104,957.3984 1119,957.3984 L1129,957.3984 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="1132" y="980.542">hash算法做了哪些优化</text><path d="M1079,948.25 L1089,948.25 C1104,948.25 1104,975.6953 1119,975.6953 L1129,975.6953 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M869,1039.7344 L879,1039.7344 C894,1039.7344 894,948.25 909,948.25 L919,948.25 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="96" x="919" y="1012.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="929" y="1035.4326">threadlocal</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="1068" y="998.8389">什么场景下使用的</text><path d="M1015,1030.5859 L1025,1030.5859 C1040,1030.5859 1040,993.9922 1055,993.9922 L1065,993.9922 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="1068" y="1017.1357">原理</text><path d="M1015,1030.5859 L1025,1030.5859 C1040,1030.5859 1040,1012.2891 1055,1012.2891 L1065,1012.2891 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1068" y="1035.4326">hash冲突怎么办</text><path d="M1015,1030.5859 L1025,1030.5859 C1040,1030.5859 1040,1030.5859 1055,1030.5859 L1065,1030.5859 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1068" y="1053.7295">扩容实现</text><path d="M1015,1030.5859 L1025,1030.5859 C1040,1030.5859 1040,1048.8828 1055,1048.8828 L1065,1048.8828 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="1068" y="1072.0264">内存泄漏产生原因，怎么解决</text><path d="M1015,1030.5859 L1025,1030.5859 C1040,1030.5859 1040,1067.1797 1055,1067.1797 L1065,1067.1797 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M869,1039.7344 L879,1039.7344 C894,1039.7344 894,1030.5859 909,1030.5859 L919,1030.5859 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="62" x="919" y="1103.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="929" y="1126.917">线程池</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="1034" y="1090.3232">原理</text><path d="M981,1122.0703 L991,1122.0703 C1006,1122.0703 1006,1085.4766 1021,1085.4766 L1031,1085.4766 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1034" y="1108.6201">核心参数</text><path d="M981,1122.0703 L991,1122.0703 C1006,1122.0703 1006,1103.7734 1021,1103.7734 L1031,1103.7734 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="1034" y="1126.917">线程数设置</text><path d="M981,1122.0703 L991,1122.0703 C1006,1122.0703 1006,1122.0703 1021,1122.0703 L1031,1122.0703 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="1034" y="1145.2139">参数动态调整后变化过程 *</text><path d="M981,1122.0703 L991,1122.0703 C1006,1122.0703 1006,1140.3672 1021,1140.3672 L1031,1140.3672 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="1034" y="1163.5107">线程抛异常怎么办 *</text><path d="M981,1122.0703 L991,1122.0703 C1006,1122.0703 1006,1158.6641 1021,1158.6641 L1031,1158.6641 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M869,1039.7344 L879,1039.7344 C894,1039.7344 894,1122.0703 909,1122.0703 L919,1122.0703 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M729,588.9063 L739,588.9063 C754,588.9063 754,1039.7344 769,1039.7344 L779,1039.7344 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M583,709.2422 L593,709.2422 C608,709.2422 608,588.9063 623,588.9063 L633,588.9063 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="48" x="633" y="1270"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="643" y="1292.9951">线程</text><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="76" x="731" y="1270"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="741" y="1292.9951">线程状态</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="860" y="1181.8076">NEW</text><path d="M807,1288.1484 L817,1288.1484 C832,1288.1484 832,1176.9609 847,1176.9609 L857,1176.9609 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="860" y="1200.1045">RUNNABLE</text><path d="M807,1288.1484 L817,1288.1484 C832,1288.1484 832,1195.2578 847,1195.2578 L857,1195.2578 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="87" x="857" y="1214.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="867" y="1237.4014">BLOCKED</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188" x="997" y="1228.2529">等待 montor lock 进入同步区</text><path d="M944,1232.5547 L954,1232.5547 C969,1232.5547 969,1223.4063 984,1223.4063 L994,1223.4063 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="230" x="997" y="1246.5498">Object.wait() 后阻塞重新进入同步区</text><path d="M944,1232.5547 L954,1232.5547 C969,1232.5547 969,1241.7031 984,1241.7031 L994,1241.7031 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M807,1288.1484 L817,1288.1484 C832,1288.1484 832,1232.5547 847,1232.5547 L857,1232.5547 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="78" x="857" y="1270.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="867" y="1293.6982">WAITING</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="988" y="1275.4014">无限 Object.wait()</text><path d="M935,1288.8516 L945,1288.8516 C960,1288.8516 960,1270.5547 975,1270.5547 L985,1270.5547 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="988" y="1293.6982">无限 Thread.join()</text><path d="M935,1288.8516 L945,1288.8516 C960,1288.8516 960,1288.8516 975,1288.8516 L985,1288.8516 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="988" y="1311.9951">LockSupport.park</text><path d="M935,1288.8516 L945,1288.8516 C960,1288.8516 960,1307.1484 975,1307.1484 L985,1307.1484 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M807,1288.1484 L817,1288.1484 C832,1288.1484 832,1288.8516 847,1288.8516 L857,1288.8516 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="129" x="857" y="1343.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="867" y="1366.8857">TIMED_WAITING</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="1039" y="1330.292">Thread.sleep</text><path d="M986,1362.0391 L996,1362.0391 C1011,1362.0391 1011,1325.4453 1026,1325.4453 L1036,1325.4453 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="1039" y="1348.5889">有限 Object.wait()</text><path d="M986,1362.0391 L996,1362.0391 C1011,1362.0391 1011,1343.7422 1026,1343.7422 L1036,1343.7422 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="1039" y="1366.8857">有限 Thread.join()</text><path d="M986,1362.0391 L996,1362.0391 C1011,1362.0391 1011,1362.0391 1026,1362.0391 L1036,1362.0391 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="1039" y="1385.1826">LockSupport.parkNanos</text><path d="M986,1362.0391 L996,1362.0391 C1011,1362.0391 1011,1380.3359 1026,1380.3359 L1036,1380.3359 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="1039" y="1403.4795">LockSupport.parkUntil</text><path d="M986,1362.0391 L996,1362.0391 C1011,1362.0391 1011,1398.6328 1026,1398.6328 L1036,1398.6328 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M807,1288.1484 L817,1288.1484 C832,1288.1484 832,1362.0391 847,1362.0391 L857,1362.0391 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="860" y="1404.1826">TERMINATED</text><path d="M807,1288.1484 L817,1288.1484 C832,1288.1484 832,1399.3359 847,1399.3359 L857,1399.3359 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M681,1288.1484 L691,1288.1484 C706,1288.1484 706,1288.1484 721,1288.1484 L731,1288.1484 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="734" y="1330.292">interrupt()</text><path d="M681,1288.1484 L691,1288.1484 C706,1288.1484 706,1325.4453 721,1325.4453 L731,1325.4453 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M583,709.2422 L593,709.2422 C608,709.2422 608,1288.1484 623,1288.1484 L633,1288.1484 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="48" x="439" y="606.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="449" y="629.6436">集合</text><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="84" x="305" y="583.4258"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="315" y="606.4209">hashmap</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="150" y="569.8271">原理, put &amp; get</text><path d="M305,601.5742 L295,601.5742 C280,601.5742 280,564.9805 265,564.9805 L255,564.9805 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="180" y="588.124">8转红黑树?</text><path d="M305,601.5742 L295,601.5742 C280,601.5742 280,583.2773 265,583.2773 L255,583.2773 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="112" y="606.4209">什么时候扩容? 0.75？</text><path d="M305,601.5742 L295,601.5742 C280,601.5742 280,601.5742 265,601.5742 L255,601.5742 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="84" y="624.7178">扩容步骤，为什么分高低位</text><path d="M305,601.5742 L295,601.5742 C280,601.5742 280,619.8711 265,619.8711 L255,619.8711 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="238" x="10" y="643.0146">头插法有什么问题，为什么线程不安全</text><path d="M305,601.5742 L295,601.5742 C280,601.5742 280,638.168 265,638.168 L255,638.168 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M439,624.7969 L429,624.7969 C414,624.7969 414,601.5742 399,601.5742 L389,601.5742 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="72" x="317" y="647.4648"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="327" y="670.46">arraylist</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="161" y="661.3115">数组加transient</text><path d="M317,665.6133 L307,665.6133 C292,665.6133 292,656.4648 277,656.4648 L267,656.4648 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="208" y="679.6084">扩容原理</text><path d="M317,665.6133 L307,665.6133 C292,665.6133 292,674.7617 277,674.7617 L267,674.7617 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M439,624.7969 L429,624.7969 C414,624.7969 414,665.6133 399,665.6133 L389,665.6133 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M537,709.2422 L527,709.2422 C512,709.2422 512,624.7969 497,624.7969 L487,624.7969 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="76" x="411" y="703.7617"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="421" y="726.7568">动态代理</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="273" x="85" y="717.6084">spring aop的理解，解决什么问题,实现原理</text><path d="M411,721.9102 L401,721.9102 C386,721.9102 386,712.7617 371,712.7617 L361,712.7617 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="162" y="735.9053">jdk动态代理,cglib区别，优缺点</text><path d="M411,721.9102 L401,721.9102 C386,721.9102 386,731.0586 371,731.0586 L361,731.0586 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M537,709.2422 L527,709.2422 C512,709.2422 512,721.9102 497,721.9102 L487,721.9102 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="48" x="439" y="760.0586"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="449" y="783.0537">反射</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="358" y="783.0537">原理</text><path d="M439,778.207 L429,778.207 C414,778.207 414,778.207 399,778.207 L389,778.207 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M537,709.2422 L527,709.2422 C512,709.2422 512,778.207 497,778.207 L487,778.207 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1tsjxy2bf8drc)" height="36.2969" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="44" x="443" y="816.3555"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="453" y="839.3506">NIO</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="334" y="821.0537">实现原理</text><path d="M443,834.5039 L433,834.5039 C418,834.5039 418,816.207 403,816.207 L393,816.207 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="348" y="839.3506">优缺点</text><path d="M443,834.5039 L433,834.5039 C418,834.5039 418,834.5039 403,834.5039 L393,834.5039 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="217" x="173" y="857.6475">netty的设计模型，架构，使用场景</text><path d="M443,834.5039 L433,834.5039 C418,834.5039 418,852.8008 403,852.8008 L393,852.8008 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><path d="M537,709.2422 L527,709.2422 C512,709.2422 512,834.5039 497,834.5039 L487,834.5039 " fill="none" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6da31f4e5a2b48a82702ecaf66e93d96]
@startmindmap
* Java

** 并发 & 同步

*** [[https://tech.meituan.com/2018/11/15/java-lock.html 锁事-美团]] synchronized 
****_ 原理，可重入性，可见性
****_ 锁升级

*** volatile
****_ 可见性
****_ 内存屏障

*** 锁
**** 锁升级
***** 偏向锁
******_ 一直被一个线程所访问
******_ 在 **Mark Word** 里存储锁偏向的线程 **ID**
******_: 
**撤销**：
只有遇到其他线程尝试竞争偏向锁时，
持有偏向锁的线程才会释放锁，
**不会主动释**放偏向锁。
**等待全局安全点**，暂停拥有偏向锁的线程，
判断锁对象是否处于被锁定状态。
恢复无锁（标志位为 01）或轻量级锁（标志位为 00）的状态
;
***** 轻量级锁
******_ 线程会通过自旋的形式尝试获取锁，不会阻塞，从而提高性能。
******_: 
无锁状态: 
在**当前线程的栈帧**中建立一个名为**锁记录**（Lock Record）的空间，
用于存储锁对象目前的 **Mark Word** 的拷贝，
然后拷贝对象头中的 **Mark Word** 复制到锁记录中。
CAS 操作尝试将对象的 **Mark Word** **更新**为指向 **Lock Record** 的指针，
并将 **Lock Record** 里的 **owner** 指针指向对象的 **Mark Word**。
更新**成功**： 线程就拥有了该对象的锁，锁标志位设置为“00”。
更新**失败**： 对象的 Mark Word 是否**指向当前线程的栈帧**？
只有当前一个等待线程，自旋；
自旋超过次数，或来第三个，膨胀。
;
*****_ 重量级锁：管程

****_: 
**乐观**: 只是在更新数据的时候去判断之前有没有别的线程更新了这个数据，
没有被更新，当前线程将自己修改的数据成功写入。
已经被其他线程更新，则根据不同的实现方式执行不同的操作（报错或重试）
;
****_: 
**悲观**: 使用数据的时候一定有别的线程来修改数据,
在获取数据的时候会先加锁,
确保数据不会被别的线程修改。
;
**** **CAS**
*****_ 乐观锁中的重试
*****_ **ABA问题**: AtomicStampedReference
*****_ **只能保证一个共享变量的原子操作**: AtomicReference
*****_ **循环时间长开销大**: 只能保证一个共享变量的原子操作
**** 死锁
*****_ 产生条件
*****_ 排查
**** reentrantlock
*****_ 实现原理，加锁和释放锁的一个过程
*****_ aqs
*****_ 公平和非公平
*****_ 可重入
*****_ 可中断

*** 并发工具类
**** concurrenthashmap
*****_ 怎么保证线程安全的
*****_ 为什么用synchronized
*****_ 分段锁有什么问题
*****_ hash算法做了哪些优化
**** threadlocal
*****_ 什么场景下使用的
*****_ 原理
*****_ hash冲突怎么办
*****_ 扩容实现
*****_ 内存泄漏产生原因，怎么解决
**** 线程池
*****_ 原理
*****_ 核心参数
*****_ 线程数设置
*****_ 参数动态调整后变化过程 *
*****_ 线程抛异常怎么办 *


** 线程
*** 线程状态
****_ NEW
****_ RUNNABLE
**** BLOCKED
*****_ 等待 montor lock 进入同步区
*****_ Object.wait() 后阻塞重新进入同步区
**** WAITING
*****_ 无限 Object.wait()
*****_ 无限 Thread.join()
*****_ LockSupport.park
**** TIMED_WAITING
*****_ Thread.sleep
*****_ 有限 Object.wait()
*****_ 有限 Thread.join()
*****_ LockSupport.parkNanos
*****_ LockSupport.parkUntil
****_ TERMINATED

***_ interrupt()

left side
** 集合

*** hashmap
****_ 原理, put & get
****_ 8转红黑树?
****_ 什么时候扩容? 0.75？
****_ 扩容步骤，为什么分高低位
****_ 头插法有什么问题，为什么线程不安全 

*** arraylist
****_ 数组加transient
****_ 扩容原理


** 动态代理
***_ spring aop的理解，解决什么问题,实现原理
***_ jdk动态代理,cglib区别，优缺点

** 反射
***_ 原理

** NIO
***_ 实现原理
***_ 优缺点
***_ netty的设计模型，架构，使用场景

@endmindmap

PlantUML version 1.2021.6(Fri May 14 07:09:51 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>